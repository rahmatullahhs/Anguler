<div class="container mt-4">
  <form [formGroup]="invoiceForm">
    <!-- Shop Info -->
    <div class="card mb-4 shadow-sm">
      <div class="card-body d-flex align-items-center justify-content-between">
        <div class="d-flex align-items-center">
          <div style="width: 80px; height: 80px; margin-right: 15px;">
            <img src="assets/gt-logo.jpg" alt="Business Icon"
              style="max-width: 100%; max-height: 100%; object-fit: contain; border: 1px solid black; border-radius: 4px;" />
          </div>
          <div>
            <h3 class="mb-1 text-primary"><b>Global Tech</b></h3>
            <p class="mb-0 text-muted">1234 Tech Avenue, Silicon City, CA 94043</p>
            <p class="mb-0 text-muted">Phone: +1 (555) 123-4567 | Email: info@globaltech.com</p>
            <p class="mb-0 text-muted">Website: www.globaltech.com</p>
          </div>
        </div>
        <div>
          <h5 class="text-muted">INVOICE</h5>
          <h6 class="fw-bold">#{{ invoiceForm.value.invoiceNumber || '0000' }}</h6>
        </div>
      </div>
    </div>

    <!-- Invoice Info -->
    <div class="card mb-4 shadow-sm">
      <div class="card-body">
        <div class="row g-3">
          <div class="col-md-4">
            <label for="invoiceNumber" class="form-label">Invoice No</label>
            <input id="invoiceNumber" type="text" class="form-control" formControlName="invoiceNumber" placeholder="Invoice Number">
          </div>

          <div class="col-md-4">
            <label for="date" class="form-label">Purchase Date</label>
            <input type="date" class="form-control" id="date" formControlName="date">
          </div>

          <div class="col-md-4">
            <label for="createdBy" class="form-label">Created By</label>
            <input type="text" class="form-control" id="createdBy" formControlName="createdBy" placeholder="Created By">
          </div>
        </div>
      </div>
    </div>

    <!-- Customer Info -->
    <div class="card mb-4 shadow-sm">
      <div class="card-body">
        <div class="row g-3">
          <div class="col-md-6">
            <label for="customerName" class="form-label">Customer Name</label>
            <input id="customerName" type="text" class="form-control" formControlName="customerName" placeholder="Full name" />
          </div>
          <div class="col-md-6">
            <label for="customerEmail" class="form-label">Email</label>
            <input id="customerEmail" type="email" class="form-control" formControlName="customerEmail" placeholder="email@example.com" />
          </div>
        </div>

        <div class="row g-3 mt-3">
          <div class="col-md-6">
            <label for="customerPhone" class="form-label">Phone Number</label>
            <input id="customerPhone" type="tel" class="form-control" formControlName="customerPhone" placeholder="+1 555-1234" />
          </div>
          <div class="col-md-6">
            <label for="customerAddress" class="form-label">Address</label>
            <input id="customerAddress" type="text" class="form-control" formControlName="customerAddress" placeholder="Customer Address" />
          </div>
        </div>
      </div>
    </div>

    <!-- Products Table -->
    <h4 class="mb-3 text-success">Purchase Summary</h4>

    <table class="table table-bordered table-striped" *ngIf="cartItems.length > 0">
      <thead>
        <tr class="table-success">
          <th>#</th>
          <th>Product</th>
          <th>Qty</th>
          <th>Price</th>
          <th>Total</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of cartItems; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ item.name }}</td>
          <td>{{ item.quantity }}</td>
          <td>{{ item.price| currency }}</td>
          <td>{{ item.quantity * item.price | currency }}</td>
        </tr>
      </tbody>
    </table>

    <div *ngIf="cartItems.length === 0" class="alert alert-warning">Your cart is empty.</div>

    <!-- Totals -->
    <div class="card p-3 shadow-sm mt-4">
  <div class="row align-items-start">

    <!-- Left Column: Input Fields -->
    <div class="col-md-6 border-end pe-4">
      <div class="mb-3">
        <label for="discount" class="form-label">Discount</label>
        <input id="discount" type="number" class="form-control" formControlName="discount" min="0">
      </div>
      <div class="mb-3">
        <label for="taxRate" class="form-label">Tax Rate (%)</label>
        <input id="taxRate" type="number" class="form-control" formControlName="taxRate" min="0">
      </div>
      <div class="mb-3">
        <label for="paid" class="form-label">Amount Paid</label>
        <input id="paid" type="number" class="form-control" formControlName="paid" min="0">
      </div>
    </div>

    <!-- Right Column: Totals and Actions -->
    <div class="col-md-6 ps-4">
      <p><strong>Subtotal:</strong> {{ invoiceForm.value.subtotal | currency }}</p>
      <p><strong>Tax:</strong> {{ invoiceForm.value.taxAmount | currency }}</p>
      <p><strong>Total:</strong> {{ invoiceForm.value.total | currency }}</p>
      <p><strong>Due:</strong> {{ invoiceForm.value.due | currency }}</p>

      <button class="btn btn-success w-100 mt-2"
              (click)="submitOrder()"
              [disabled]="invoiceForm.invalid || cartItems.length === 0">
        Complete Sale
      </button>

      <!-- <button class="btn btn-outline-primary w-100 mt-2"
              (click)="printInvoice()"
              [disabled]="cartItems.length === 0">
        Print Invoice
      </button> -->
    </div>

  </div>
</div>

  </form>
</div>

<div class="text-center my-5">
  <h2 class="text-uppercase text-primary fw-bold border-bottom pb-2 d-inline-block" style="letter-spacing: 1px;">
    Invoice Preview
  </h2>
</div>


<div class="container mt-5">
  <form [formGroup]="invoiceForm">
    <div id="invoiceToPrint" class="p-4 rounded shadow" style="background-color: #f8f9fa;">

      <!-- Invoice Header -->
      <div class="card border-primary mb-4">
        <div class="card-body d-flex justify-content-between align-items-start">
          
          <!-- Shop Info -->
          <div>
            <!-- Optional Logo -->
            <!-- <img src="assets/logo.png" alt="Logo" height="60" class="mb-2"> -->
           <div style="width: 80px; height: 80px; margin-right: 15px;">
            <img src="assets/gt-logo.jpg" alt="Business Icon"
              style="max-width: 100%; max-height: 100%; object-fit: contain; border: 1px solid black; border-radius: 4px;" />
          </div>
           <h1 class="mb-2 fw-bold text-dark" style="letter-spacing: 1.5px; font-family: 'Segoe UI', sans-serif;">
              Global Tech
            </h1>
            <p class="mb-1">1234 Tech Avenue, Silicon City, CA</p>
            <p class="mb-1">üìû +1 (555) 123-4567   ‚úâÔ∏è info@globaltech.com</p>
          
          </div>

          <!-- Invoice Info -->
          <div class="text-end">
            <h1 class="display-4 text-uppercase fw-bold text-primary" style="font-family: 'Courier New', monospace;">
              INVOICE
            </h1>
            <p class="mb-1 fs-5"><strong>Invoice #:</strong> {{ invoiceForm.value.invoiceNumber }}</p>
            <p class="mb-1 fs-5"><strong>Date:</strong> {{ invoiceForm.value.date }}</p>
            <p class="mb-0 fs-5"><strong>Created By:</strong> {{ invoiceForm.value.createdBy }}</p>
          </div>
        </div>
      </div>

      <!-- Customer Info -->
      <div class="card border-info mb-4">
        <div class="card-body">
          <h5 class="text-dark fw-bold mb-3">Customer Information</h5>
          <div class="row">
            <div class="col-md-6">
              <p><strong>Name:</strong> {{ invoiceForm.value.customerName }}</p>
              <p><strong>Email:</strong> {{ invoiceForm.value.customerEmail }}</p>
            </div>
            <div class="col-md-6">
              <p><strong>Phone:</strong> {{ invoiceForm.value.customerPhone }}</p>
              <p><strong>Address:</strong> {{ invoiceForm.value.customerAddress }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Product Table -->
      <div class="table-responsive mb-4">
        <table class="table table-striped table-bordered align-middle">
          <thead class="table-primary">
            <tr>
              <th>#</th>
              <th>Product</th>
              <th>Qty</th>
              <th>Price</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of cartItems; let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{ item.name }}</td>
              <td>{{ item.quantity }}</td>
              <td>{{ item.price | currency }}</td>
              <td>{{ item.quantity * item.price | currency }}</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Totals -->
      <div class="bg-light p-3 rounded">
        <div class="row justify-content-end">
          <div class="col-md-6">
            <ul class="list-group list-group-flush">
              <li class="list-group-item d-flex justify-content-between">
                <strong>Subtotal:</strong>
                <span>{{ invoiceForm.value.subtotal | currency }}</span>
              </li>
              <li class="list-group-item d-flex justify-content-between">
                <strong>Discount:</strong>
                <span>{{ invoiceForm.value.discount | currency }}</span>
              </li>
              <li class="list-group-item d-flex justify-content-between">
                <strong>Tax ({{ invoiceForm.value.taxRate }}%):</strong>
                <span>{{ invoiceForm.value.taxAmount | currency }}</span>
              </li>
              <li class="list-group-item d-flex justify-content-between bg-success text-white">
                <strong>Total:</strong>
                <span>{{ invoiceForm.value.total | currency }}</span>
              </li>
              <li class="list-group-item d-flex justify-content-between">
                <strong>Paid:</strong>
                <span class="text-success">{{ invoiceForm.value.paid | currency }}</span>
              </li>
              <li class="list-group-item d-flex justify-content-between">
                <strong>Due:</strong>
                <span class="text-danger">{{ invoiceForm.value.due | currency }}</span>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Footer -->
    <!-- Invoice Footer -->
<div class="text-center mt-5 text-muted small">
  <hr>
  <p><strong>Terms:</strong> Payment is due within 15 days. Late payments may be subject to a 5% fee.</p>
  <p>Thank you for choosing <strong>Global Tech</strong>. We value your business!</p>
  <p>üìß info@globaltech.com | üåê www.globaltech.com</p>
</div>
    </div>

    <!-- Action Buttons -->
    <div class="mt-4 text-center">
      <button type="button" class="btn btn-primary" (click)="printInvoice()">
        <i class="bi bi-download me-1"></i> Download PDF
      </button>
    </div>
  </form>
</div>
