<div class="container">
  <button class="btn btn-sm btn-success" routerLink="/productprice">Product Price</button>
  <h2>{{ isEditMode ? 'Edit COGS Entry' : 'Add New COGS Entry' }}</h2>

  <form [formGroup]="cogsForm" (ngSubmit)="onSubmit()">
    <div class="row">
      <div class="col-md-4">
        <label>Date</label>
        <input type="date" class="form-control" formControlName="date">
      </div>

      <div class="col-md-4">
        <label>Purchase Invoice</label>
        <input type="text" class="form-control" formControlName="purchaseInvoice">
      </div>

      <div class="col-md-4">
        <label>Product Name</label>
        <input type="text" class="form-control" formControlName="productName">
      </div>
    </div>

    <div class="row mt-3">
      <div class="col-md-4">
        <label>Product Qty</label>
        <input type="number" class="form-control" formControlName="productQty" min="1">
      </div>

      <div class="col-md-4">
        <label>Product Price</label>
        <input type="number" class="form-control" formControlName="productPrice">
      </div>

      <div class="col-md-4">
        <label>Transport Fee</label>
        <input type="number" class="form-control" formControlName="transportFee">
      </div>
    </div>

    <div class="row mt-3">
      <div class="col-md-4">
        <label>Labour Cost</label>
        <input type="number" class="form-control" formControlName="labourCost">
      </div>

      <div class="col-md-4">
        <label>Packing Cost</label>
        <input type="number" class="form-control" formControlName="packingCost">
      </div>

      <div class="col-md-4">
        <label>Tax (20.5% of CIF)</label>
        <input type="number" class="form-control" formControlName="tax" readonly>
      </div>
    </div>

    <div class="row mt-3">
      <div class="col-md-4">
        <label>Total COGS</label>
        <input type="number" class="form-control" formControlName="totalCogs" readonly>
      </div>

      <div class="col-md-4">
        <label>Each Product Price</label>
        <input type="number" class="form-control" formControlName="eachProductPrice" readonly>
      </div>
    </div>

    <div class="mt-3">
      <button type="submit" class="btn btn-primary">{{ isEditMode ? 'Update' : 'Add' }}</button>
      <button type="button" class="btn btn-secondary" (click)="resetForm()">Reset</button>
    </div>
  </form>

  <hr>

  <h3>COGS Records</h3>
  <table class="table table-bordered table-striped">
    <thead>
      <tr>
        <th>Date</th>
        <th>Invoice</th>
        <th>Product</th>
        <th>Qty</th>
        <th>Price</th>
        <th>Transport</th>
        <th>Labour</th>
        <th>Packing</th>
        <th>Tax</th>
        <th>Total</th>
        <th>Each Price</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let cogs of cogsList">
        <td>{{ cogs.date | date:'yyyy-MM-dd' }}</td>
        <td>{{ cogs.purchaseInvoice }}</td>
        <td>{{ cogs.productName }}</td>
        <td>{{ cogs.productQty }}</td>
        <td>{{ cogs.productCost }}</td>
        <td>{{ cogs.transportFee }}</td>
        <td>{{ cogs.labourCost }}</td>
        <td>{{ cogs.packingCost }}</td>
        <td>{{ cogs.tax | number:'1.2-2' }}</td>
        <td>{{ cogs.totalCogs | number:'1.2-2' }}</td>
        <td>{{ cogs.eachProductPrice | number:'1.2-2' }}</td>
        <td>
          <button class="btn btn-sm btn-info" (click)="editCogs(cogs)">Edit</button>
          <button class="btn btn-sm btn-danger" (click)="deleteCogs(cogs.id!)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
